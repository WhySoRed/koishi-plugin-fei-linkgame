<body onload="draw();">
  <canvas id="main" width="720" height="620"></canvas>
  <canvas id="patternBlock" width="100" height="100"></canvas>
  <canvas id="patternBlockShadow" width="100" height="100"></canvas>
</body>


<script>
  const patterns = [
    "üòÄ",
    "‚ù§Ô∏è",
    "üíé",
    "‚ö°",
    "üå∏",
    "üêá",
    "‚è∞",
    "üî•",
    "üòà",
  ];
  const table = {
    xLength: 5,
    yLength: 6,
    maxPatternTypes: 9,
    pattern: [
      [
        0, 0, 0, 0,
        0, 0, 0, 0
      ],
      [
        0, 1, 1, 6,
        7, 7, 8, 0
      ],
      [
        0, 8, 8, 1,
        3, 3, 9, 0
      ],
      [
        0, 2, 5, 5,
        4, 1, 4, 0
      ],
      [
        0, 5, 7, 3,
        6, 5, 7, 0
      ],
      [
        0, 8, 2, 4,
        4, 3, 9, 0
      ],
      [
        0, 0, 0, 0,
        0, 0, 0, 0
      ]
    ]
  }

  // const blockSize = config.blockSize;
  const pattern = [""].concat(patterns);

  function draw() {
    const blockSize = 100;
    const width = (table.yLength + 2 - 0.8) * blockSize;
    const height = (table.xLength + 2 - 0.8) * blockSize;

    const blockPath = new Path2D();
    blockPath.moveTo(0.2 * blockSize, 0.1 * blockSize);
    blockPath.lineTo(0.8 * blockSize, 0.1 * blockSize);
    blockPath.quadraticCurveTo(
      0.9 * blockSize,
      0.1 * blockSize,
      0.9 * blockSize,
      0.2 * blockSize
    );
    blockPath.lineTo(0.9 * blockSize, 0.8 * blockSize);
    blockPath.quadraticCurveTo(
      0.9 * blockSize,
      0.9 * blockSize,
      0.8 * blockSize,
      0.9 * blockSize
    );
    blockPath.lineTo(0.2 * blockSize, 0.9 * blockSize);
    blockPath.quadraticCurveTo(
      0.1 * blockSize,
      0.9 * blockSize,
      0.1 * blockSize,
      0.8 * blockSize
    );
    blockPath.lineTo(0.1 * blockSize, 0.2 * blockSize);
    blockPath.quadraticCurveTo(
      0.1 * blockSize,
      0.1 * blockSize,
      0.2 * blockSize,
      0.1 * blockSize
    );

    var patternBlockCanvas = document.getElementById("patternBlock");
    var patternBlockShadowCanvas = document.getElementById(
      "patternBlockShadow"
    );
    var ctxBlock = patternBlockCanvas.getContext("2d");
    const ctxBlockShadow = patternBlockShadowCanvas.getContext("2d");


    ctxBlock.fillStyle = "#fcf5f7";
    ctxBlock.fill(blockPath);
    ctxBlockShadow.fillStyle = "#00a5bf";
    ctxBlockShadow.fill(blockPath);

    const canvas = document.getElementById("main");
    const ctx = canvas.getContext("2d");
    const gradient = ctx.createLinearGradient(0, 0, width, height);
    gradient.addColorStop(0, "#002a33");
    gradient.addColorStop(1, "#002129");
    ctx.fillStyle = gradient;
    ctx.fillRect(0, 0, width, height);

    ctx.translate(-0.4 * blockSize, -0.4 * blockSize);

    ctx.fillStyle = "#fcf5f7";
    ctx.font = `${0.4 * blockSize}px Arial`;
    for (let i = 0; i < table.yLength + 2; i++) {
      for (let j = 0; j < table.xLength + 2; j++) {
        if (table.pattern[j][i]) {
          ctx.save();
          ctx.drawImage(
            patternBlockShadowCanvas,
            (i + 0.05) * blockSize,
            (j + 0.05) * blockSize
          );
          ctx.drawImage(patternBlockCanvas, i * blockSize, j * blockSize);
          ctx.restore();
          ctx.fillText(
            pattern[table.pattern[j][i]],
            i * blockSize + 0.25 * blockSize,
            j * blockSize + 0.65 * blockSize
          );
          ctx.save();
          ctx.fillStyle = "#de3163";
          ctx.font = `${0.2 * blockSize}px Arial`;
          ctx.fillText(
            (j - 1) * table.yLength + (i - 1) + "",
            i * blockSize + 0.15 * blockSize,
            j * blockSize + 0.85 * blockSize
          );
          ctx.restore();
        }
      }
    }
    // if (linkPathArr) {
    //   ctx.translate(
    //     -0.03 * blockSize * Math.floor(linkPathArr.length / 2),
    //     -0.03 * blockSize * Math.floor(linkPathArr.length / 2)
    //   );
    // }
    // for (const i in linkPathArr) {
    //   const linkPath = linkPathArr[i];
    //   if (linkPath.length) {
    //     ctx.strokeStyle = "#de3163";
    //     ctx.lineWidth = 0.1 * blockSize;
    //     ctx.lineCap = "round";
    //     ctx.lineJoin = "round";
    //     ctx.translate(0.03 * blockSize, 0.03 * blockSize);
    //     ctx.moveTo(
    //       linkPath[0].y * blockSize + 0.5 * blockSize,
    //       linkPath[0].x * blockSize + 0.5 * blockSize
    //     );
    //     for (let i = 1; i < linkPath.length; i++) {
    //       let drawpointX;
    //       let drawpointY;
    //       if (linkPath[i].y === 0)
    //         drawpointX = linkPath[i].y * blockSize + 0.8 * blockSize;
    //       else if (linkPath[i].y === table.yLength + 1)
    //         drawpointX = linkPath[i].y * blockSize + 0.2 * blockSize;
    //       else drawpointX = linkPath[i].y * blockSize + 0.5 * blockSize;

    //       if (linkPath[i].x === 0)
    //         drawpointY = linkPath[i].x * blockSize + 0.8 * blockSize;
    //       else if (linkPath[i].x === table.xLength + 1)
    //         drawpointY = linkPath[i].x * blockSize + 0.2 * blockSize;
    //       else drawpointY = linkPath[i].x * blockSize + 0.5 * blockSize;

    //       ctx.lineTo(drawpointX, drawpointY);
    //       ctx.stroke();
    //     }
    //   }
    // }

    ctx.translate(0.4 * blockSize, 0.4 * blockSize);
  }
</script>